<!DOCTYPE html>
<html>
  <body>
    <input type="text" name="token" id="token" />
    <button onclick="runTest()">Test</button><br/>
    <span id="starturl"></span><br/>
    <span>v11</span><br/>
    <span id="isChrome"></span><br/>
    <span id="userAgent"></span>
  </body>
  <script>
    const isChrome = ((/CriOS/i.test(navigator.userAgent) && /iphone|ipod|ipad/i.test(navigator.userAgent)) ||Â /Chrome/i.test(navigator.userAgent));
    document.getElementById('isChrome').innerHTML = 'isChrome?' + isChrome.toString();
    document.getElementById('userAgent').innerHTML = navigator.userAgent;
    
    function runTest() {
      let redirectUrl = window.location.href;
      redirectUrl = isChrome ? redirectUrl.replace('http', 'googlechrome') : redirectUrl; // will be correct for https
      
      const autostartToken = document.getElementById('token').value;
      const starturl = 'bankid:///?autostarttoken=' + autostartToken + '&redirect=' + encodeURIComponent(redirectUrl);
      document.getElementById('starturl').innerHTML = starturl;
      
      window.location = starturl;
    }
  </script>
</html>
